<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Can You Use Blazor for Only Part of an App? | Azure Selected</title>
    <meta name="description" content="AzureSelected is a project for localizing content by Cloud Advocate to empower your Azure skills.">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.8970f8ee.css" as="style"><link rel="preload" href="/assets/js/app.62ea8ba9.js" as="script"><link rel="preload" href="/assets/js/2.024090f7.js" as="script"><link rel="preload" href="/assets/js/16.fef45c3c.js" as="script"><link rel="preload" href="/assets/js/3.c99638c5.js" as="script"><link rel="preload" href="/assets/js/5.4abcb495.js" as="script"><link rel="prefetch" href="/assets/js/10.54e5233c.js"><link rel="prefetch" href="/assets/js/11.cd3df416.js"><link rel="prefetch" href="/assets/js/12.7fdab60b.js"><link rel="prefetch" href="/assets/js/13.92642c95.js"><link rel="prefetch" href="/assets/js/14.35292508.js"><link rel="prefetch" href="/assets/js/15.6bf1f6eb.js"><link rel="prefetch" href="/assets/js/17.2f736bcd.js"><link rel="prefetch" href="/assets/js/18.0de4b2ee.js"><link rel="prefetch" href="/assets/js/19.df1949e3.js"><link rel="prefetch" href="/assets/js/20.9b57aff5.js"><link rel="prefetch" href="/assets/js/21.33250630.js"><link rel="prefetch" href="/assets/js/22.490c1ea1.js"><link rel="prefetch" href="/assets/js/23.986d72c3.js"><link rel="prefetch" href="/assets/js/24.f4bb1e22.js"><link rel="prefetch" href="/assets/js/25.906da7d9.js"><link rel="prefetch" href="/assets/js/26.f5e9fe46.js"><link rel="prefetch" href="/assets/js/27.a3ead658.js"><link rel="prefetch" href="/assets/js/28.237e395a.js"><link rel="prefetch" href="/assets/js/29.af301d10.js"><link rel="prefetch" href="/assets/js/30.c2566ce5.js"><link rel="prefetch" href="/assets/js/31.5d60b26c.js"><link rel="prefetch" href="/assets/js/32.fd3eee7e.js"><link rel="prefetch" href="/assets/js/33.60d35447.js"><link rel="prefetch" href="/assets/js/34.76b802a1.js"><link rel="prefetch" href="/assets/js/35.c0d5cde9.js"><link rel="prefetch" href="/assets/js/36.ce441778.js"><link rel="prefetch" href="/assets/js/37.53a9472b.js"><link rel="prefetch" href="/assets/js/38.f3bdb7a1.js"><link rel="prefetch" href="/assets/js/39.2be3d3a1.js"><link rel="prefetch" href="/assets/js/4.209f09af.js"><link rel="prefetch" href="/assets/js/40.1742313e.js"><link rel="prefetch" href="/assets/js/41.07900bd1.js"><link rel="prefetch" href="/assets/js/42.52b31133.js"><link rel="prefetch" href="/assets/js/43.ad4743a1.js"><link rel="prefetch" href="/assets/js/44.a9654cc5.js"><link rel="prefetch" href="/assets/js/45.e5b10457.js"><link rel="prefetch" href="/assets/js/46.5abc2616.js"><link rel="prefetch" href="/assets/js/47.95a6ea4e.js"><link rel="prefetch" href="/assets/js/48.8dfc0dae.js"><link rel="prefetch" href="/assets/js/49.2906b3a6.js"><link rel="prefetch" href="/assets/js/50.f85bc68e.js"><link rel="prefetch" href="/assets/js/51.cd8b0728.js"><link rel="prefetch" href="/assets/js/52.59653a15.js"><link rel="prefetch" href="/assets/js/53.9bcffc9a.js"><link rel="prefetch" href="/assets/js/54.bcdf8c4b.js"><link rel="prefetch" href="/assets/js/55.ce4aa210.js"><link rel="prefetch" href="/assets/js/56.0560d544.js"><link rel="prefetch" href="/assets/js/6.8e24df31.js"><link rel="prefetch" href="/assets/js/7.63807aba.js"><link rel="prefetch" href="/assets/js/8.98289253.js"><link rel="prefetch" href="/assets/js/9.35305062.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8970f8ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo_azure.svg" alt="Azure Selected" class="logo"> <span class="site-name can-hide">Azure Selected</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/content/" class="nav-link router-link-active">Content</a></div><div class="nav-item"><a href="/tags.html" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join Us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-cn/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/zh-tw/" class="nav-link">繁體中文</a></li></ul></div></div> <a href="https://github.com/azureselected/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/content/" class="nav-link router-link-active">Content</a></div><div class="nav-item"><a href="/tags.html" class="nav-link">Tags</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join Us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh-cn/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/zh-tw/" class="nav-link">繁體中文</a></li></ul></div></div> <a href="https://github.com/azureselected/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Can You Use Blazor for Only Part of an App?</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#understanding-how-blazor-starts" class="sidebar-link">Understanding How Blazor Starts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#lazy-loading-blazor" class="sidebar-link">Lazy-Loading Blazor</a></li></ul></li><li><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#placing-your-blazor-app" class="sidebar-link">Placing Your Blazor App</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#hosting-blazor" class="sidebar-link">Hosting Blazor</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#blazor-routing" class="sidebar-link">Blazor Routing</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.html#conclusion" class="sidebar-link">Conclusion</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="can-you-use-blazor-for-only-part-of-an-app"><a href="#can-you-use-blazor-for-only-part-of-an-app" class="header-anchor">#</a> Can You Use Blazor for Only Part of an App?</h1> <div class="content-meta"><hr> <p>From:  <a href="https://www.aaron-powell.com/posts/2019-12-10-can-you-use-blazor-for-only-part-of-an-app/">https://www.aaron-powell.com/posts/2019-12-10-can-you-use-blazor-for-only-part-of-an-app/</a></p> <p>By:  Aaron Powell | 12/6/2019</p> <!----> <div class="tags-head"><span><a href="/tags.html#Microsoft Blazor">
      Microsoft Blazor
    </a></span></div> <hr></div> <p><a href="https://docs.microsoft.com/en-gb/aspnet/core/blazor/?view=aspnetcore-3.0&amp;WT.mc_id=aaronpowell-blog-aapowell" target="_blank" rel="noopener noreferrer">Blazor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is designed to be a platform where you create a complete web application and we saw that in the last <a href="https://www.aaron-powell.com/posts/2019-11-29-implementing-search-in-blazor-webassembly-with-lucenenet" target="_blank" rel="noopener noreferrer">experiment with Blazor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> where we created a stand-alone search site for my blog. But like any tool in our toolbox, it isn't <em>always</em> the right one for the job.</p> <p>Take my blog for example, it's pretty much a read-only site with the content <a href="https://github.com/aaronpowell/aaronpowell.github.io" target="_blank" rel="noopener noreferrer">stored in GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as markdown that I use <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer">Hugo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to convert into HTML files. Now sure, it's possible to do it as a Blazor WASM application, we could get a .NET Markdown library could be used and the pages generated on-the-fly, but that'd an inefficient way to have my website run and would provide a sub-optimal experience to readers.</p> <p>But if we want to integrate the search app that we've previously built, how do we go about that?</p> <h2 id="understanding-how-blazor-starts"><a href="#understanding-how-blazor-starts" class="header-anchor">#</a> Understanding How Blazor Starts</h2> <p>To think about how we can run Blazor WebAssembly within another application we need to learn a bit about how a Blazor WebAssembly application runs.</p> <p>When you create a new project there's a file called <code>wwwroot/index.html</code> that you might never have dug into, but this is an important piece of the puzzle. It looks like this:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Project Name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>css/bootstrap/bootstrap.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>css/site.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>_framework/blazor.webassembly.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And really, it's pretty simple, the important pieces that we need are these two lines:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>_framework/blazor.webassembly.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>We'll get to the <code>&lt;app&gt;</code> element shortly, but first, let's take a look at the JavaScript file. You might notice that this file doesn't appear anywhere on disk, and that's because it's part of the build output. You can find the source of this on GitHub in the ASP.NET Core repository at <a href="https://github.com/aspnet/AspNetCore/blob/5bdf75f3e160bc90768526ba07c30e594b08b96d/src/Components/Web.JS/src/Boot.WebAssembly.ts" target="_blank" rel="noopener noreferrer"><code>src/Components/Web.JS/src/Boot.WebAssembly.ts</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (at the time of writing anyway). This file shares some stuff in common with Blazor Server, but with the main difference of using the <a href="https://github.com/aspnet/AspNetCore/blob/e72223eaf58a3ee6660a922064d2449e47b78253/src/Components/Web.JS/src/Platform/Mono/MonoPlatform.ts" target="_blank" rel="noopener noreferrer"><code>MonoPlatform</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which does a bunch of WASM interop.</p> <p>This file is critical, without it your Blazor application won't ever start up since it's responsible for initializing the WASM environment that hosts Mono (by injecting <a href="https://github.com/aspnet/AspNetCore/blob/e72223eaf58a3ee6660a922064d2449e47b78253/src/Components/Web.JS/src/Platform/Mono/MonoPlatform.ts#L197-L200" target="_blank" rel="noopener noreferrer">a script into the DOM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) and then it will use another generated file, <code>_framework/blazor.boot.json</code>, to work out what .NET DLL's will need to be loaded into the Mono/WASM environment.</p> <p>So you need to have this JS file included and the <code>_framework</code> folder needs to be at the root since that's how it finds the JSON file (see <a href="https://github.com/aspnet/AspNetCore/blob/e72223eaf58a3ee6660a922064d2449e47b78253/src/Components/Web.JS/src/Boot.WebAssembly.ts#L61-L62" target="_blank" rel="noopener noreferrer">this comment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).</p> <h3 id="lazy-loading-blazor"><a href="#lazy-loading-blazor" class="header-anchor">#</a> Lazy-Loading Blazor</h3> <p>An interesting aside which I came across while digging in the source is that you can delay the load of Blazor by adding <code>autostart=&quot;false&quot;</code> to the <code>&lt;script&gt;</code> tag, as per <a href="https://github.com/aspnet/AspNetCore/blob/e72223eaf58a3ee6660a922064d2449e47b78253/src/Components/Web.JS/src/BootCommon.ts#L5" target="_blank" rel="noopener noreferrer">this line<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and then call <code>window.Blazor.start()</code> in JavaScript to start the Blazor application.</p> <p>I'm not going to use it for this integration, but it's good to know that you can have a user-initiated initialisation, rather than on page load.</p> <h2 id="placing-your-blazor-app"><a href="#placing-your-blazor-app" class="header-anchor">#</a> Placing Your Blazor App</h2> <p>Now that we understand what makes our Blazor app start, how do we know where in the DOM it'll appear? Well, that's what the <code>&lt;app&gt;</code> element in our HTML is for, but how does <strong>Blazor</strong> know about it?</p> <p>It turns out that that is something that we control from our <code>Startup</code> class:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Builder<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>DependencyInjection<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> DemoProject
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IComponentsApplicationBuilder</span> app<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token punctuation">&lt;</span><span class="token class-name">App</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>See how on line 14 we're using <code>AddComponent</code> and specifying a DOM selector of <code>app</code>? That's how it knows what element in the DOM the application will start. This is something that you can change, maybe make it a selector to a ID of a DOM element or to a <code>&lt;div&gt;</code>, or to anything else that you want, but it's not that important, so I just leave it as <code>&lt;app&gt;</code>.</p> <p><em>Aside: I haven't tried it yet, but given that you specify the DOM element and the entry component (via generics, this points to <code>App.razor</code> in the above sample) you could potentially have multiple independent Blazor apps running on a page. Why would you do this, I have no idea... but you can in theory!</em></p> <h2 id="hosting-blazor"><a href="#hosting-blazor" class="header-anchor">#</a> Hosting Blazor</h2> <p>When it comes to hosting Blazor WASM <a href="https://docs.microsoft.com/en-gb/aspnet/core/host-and-deploy/blazor/webassembly?view=aspnetcore-3.1&amp;WT.mc_id=aaronpowell-blog-aapowell" target="_blank" rel="noopener noreferrer">there are a few options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> but I want to focus on the <a href="https://docs.microsoft.com/en-gb/aspnet/core/host-and-deploy/blazor/webassembly?view=aspnetcore-3.1&amp;WT.mc_id=aaronpowell-blog-aapowell#azure-storage" target="_blank" rel="noopener noreferrer">Azure Storage static sites<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> approach, which is how my blog is hosted.</p> <p>First thing we'll need to do is publish the app in Release mode using <code>dotnet publish --configuration Release</code>. From that we'll grab the contents of the <code>bin/Release/{TARGET FRAMEWORK}/publish/{ASSEMBLY NAME}/dist/_framework</code> folder, which will contain <code>blazor.boot.json</code>, <code>blazor.server.js</code>, <code>blazor.webassembly.js</code>, a folder called <code>_bin</code> and a folder called <code>wasm</code>.</p> <p>We want to copy this <code>_framework</code> folder and place it in the root of our static site, maintaining all the paths so that Blazor can start up.</p> <p><em>Note: According to the docs you can change the <code>content-root</code> and <code>path-base</code> when hosting using <code>dotnet run</code> but I haven't found them working when it's published. Also, Hugo is very aggressive at setting absolute paths so I found it easiest to put my WASM files in the same structure that <code>dotnet run</code> used.</em></p> <p>Since this is a search application let's create a new page called <a href="https://raw.githubusercontent.com/aaronpowell/aaronpowell.github.io/fac2ae4c8db58f6b4b010522769fc928eb0e1983/src/content/search.md" target="_blank" rel="noopener noreferrer">Search<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and put in our required HTML:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/_framework/blazor.webassembly.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Now generate your static site (or whatever host you're using) and navigate to the <code>/search</code> router.</p> <p>If everything has gone correctly you'll have just received an error!</p> <blockquote><p>Sorry, there's nothing at this address.</p></blockquote> <p><img src="https://www.aaron-powell.com/images/doh.gif" alt="D'oh"></p> <h2 id="blazor-routing"><a href="#blazor-routing" class="header-anchor">#</a> Blazor Routing</h2> <p>If you remember back to <a href="https://www.aaron-powell.com/posts/2019-11-29-implementing-search-in-blazor-webassembly-with-lucenenet" target="_blank" rel="noopener noreferrer">our last post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> we learnt about the <code>@page</code> directive in Razor Components. Here you specify the route that the page will match on and up until now we've had <code>@page &quot;/&quot;</code> there. But, we're now on <code>/search</code> and Blazor's routing engine has looked at the URL and executed your <code>App.razor</code> component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Router</span> <span class="token attr-name">AppAssembly</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>@typeof(Program).Assembly<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Found</span> <span class="token attr-name">Context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>routeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouteView</span> <span class="token attr-name">RouteData</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>@routeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">DefaultLayout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>@typeof(MainLayout)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Found</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NotFound</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LayoutView</span> <span class="token attr-name">Layout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>@typeof(MainLayout)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Sorry, there's nothing at this address.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LayoutView</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NotFound</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Router</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Since the <code>Router</code> didn't find a matched route to use <code>RouteView</code> against it's fallen through to <code>NotFound</code> and that is why we have this error!</p> <p>Don't worry, it's an easy fix, just update the <code>@page</code> directive to match the route that you want it to match on in your published site <em>or</em> simplify your <code>App.razor</code> to not care about routing.</p> <p>Once a new publish is done and the files copied across it'll be happy.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Blazor is a great way which we can build rich applications, but there is value in generating static content upfront and using Blazor to enhance an application rather than own it.</p> <p>Here we've taken a bit of a look at the important files used to run a Blazor application within an HTML page and we've also looked at what it takes to drop it into some other kind of application.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azureselected/azureselected/edit/master/content/cloud-advocate/2020-01/can-you-use-blazor-for-only-part-of-an-app.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/15/2020, 8:38:22 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.62ea8ba9.js" defer></script><script src="/assets/js/2.024090f7.js" defer></script><script src="/assets/js/16.fef45c3c.js" defer></script><script src="/assets/js/3.c99638c5.js" defer></script><script src="/assets/js/5.4abcb495.js" defer></script>
  </body>
</html>
